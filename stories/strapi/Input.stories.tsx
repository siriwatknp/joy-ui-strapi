import React from 'react';
import { Meta, Story } from '@storybook/react';
import Box from '@mui/joy/Box';
import Link from '@mui/joy/Link';
import IconButton from '@mui/joy/IconButton';
import FormControl from '@mui/joy/FormControl';
import FormLabel from '@mui/joy/FormLabel';
import FormHelperText from '@mui/joy/FormHelperText';
import Input, { InputProps, inputClasses } from '@mui/joy/Input';

const meta: Meta = {
  title: 'Strapi/Input',
  component: Input,
  argTypes: {},
  parameters: {
    controls: { expanded: true },
  },
};

export default meta;

export const Simple: Story<InputProps> = args => (
  <FormControl>
    <FormLabel>Label</FormLabel>
    <Input {...args} placeholder="Placeholder" />
    <FormHelperText>Description</FormHelperText>
  </FormControl>
);

export const Focused: Story<InputProps> = args => (
  <FormControl>
    <FormLabel>Label</FormLabel>
    <Input {...args} autoFocus placeholder="Placeholder" />
    <FormHelperText>Description</FormHelperText>
  </FormControl>
);

export const Error: Story<InputProps> = args => (
  <FormControl error>
    <FormLabel>Label</FormLabel>
    <Input {...args} placeholder="Placeholder" />
    <FormHelperText>Description</FormHelperText>
  </FormControl>
);

export const Disabled: Story<InputProps> = args => (
  <FormControl disabled>
    <FormLabel>Label</FormLabel>
    <Input {...args} placeholder="Placeholder" />
    <FormHelperText>Description</FormHelperText>
  </FormControl>
);

const Globe = () => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="12"
    height="12"
    viewBox="0 0 12 12"
    fill="none"
  >
    <g clip-path="url(#clip0_13411_18459)">
      <path
        d="M6.29461 11.8394L6.27319 11.8359C6.27619 11.8383 6.27972 11.8398 6.28346 11.8404C6.2872 11.841 6.29103 11.8407 6.29461 11.8394Z"
        fill="#8E8EA9"
      />
      <path
        d="M11.167 4.17271C11.1609 4.14039 11.1442 4.11104 11.1195 4.08932C11.0948 4.06759 11.0635 4.05474 11.0307 4.0528C10.9979 4.05087 10.9653 4.05995 10.9382 4.07862C10.9112 4.09728 10.8911 4.12446 10.8812 4.15584C10.8718 4.18563 10.8531 4.21165 10.8279 4.23018C10.8028 4.24871 10.7724 4.25879 10.7411 4.25896H10.3268C10.2999 4.25899 10.2736 4.25167 10.2507 4.2378L9.65122 3.87834C9.62827 3.86447 9.60196 3.85715 9.57515 3.85718H8.61622C8.58703 3.85715 8.55849 3.86582 8.53425 3.88209L7.35166 4.67039C7.33122 4.68401 7.31449 4.7025 7.30299 4.7242C7.29149 4.7459 7.28557 4.77012 7.28577 4.79468V5.91272C7.28574 5.93951 7.293 5.96581 7.30678 5.98879C7.32056 6.01177 7.34034 6.03057 7.36399 6.04316L8.91461 6.87084C8.93791 6.88338 8.95744 6.9019 8.97119 6.9245C8.98494 6.9471 8.99241 6.97296 8.99283 6.99941L9.00006 7.62861C9.00047 7.65466 9.00775 7.68014 9.02115 7.70248C9.03455 7.72481 9.05361 7.74322 9.0764 7.75584L9.69943 8.10058C9.72252 8.1134 9.74176 8.13215 9.75518 8.15489C9.7686 8.17763 9.77571 8.20355 9.77577 8.22995V9.53174C9.77578 9.56019 9.78399 9.58803 9.79943 9.61193C9.81486 9.63583 9.83686 9.65477 9.86279 9.66647C9.88872 9.67818 9.91747 9.68216 9.94561 9.67793C9.97374 9.6737 10.0001 9.66144 10.0214 9.64263C10.2726 9.42138 10.6329 9.09835 10.6809 9.02442C10.7601 8.90174 10.8345 8.77611 10.904 8.64754C11.0478 8.38115 11.1697 8.10343 11.2683 7.81718C11.6079 6.83388 11.3395 5.06629 11.167 4.17271Z"
        fill="#8E8EA9"
      />
      <path
        d="M6.81427 7.25372L5.1715 6.02157C5.15296 6.00766 5.1304 6.00014 5.10722 6.00014H4.32775C4.31442 6.00016 4.30121 5.99754 4.28889 5.99244C4.27657 5.98734 4.26538 5.97985 4.25597 5.97041L3.88847 5.60291C3.87851 5.59297 3.86669 5.58508 3.85368 5.5797C3.84068 5.57432 3.82674 5.57156 3.81266 5.57157H2.38793C2.36785 5.57157 2.34822 5.56562 2.33153 5.55447C2.31483 5.54331 2.30182 5.52746 2.29414 5.50891C2.28645 5.49036 2.28444 5.46994 2.28836 5.45025C2.29228 5.43056 2.30195 5.41247 2.31614 5.39827L2.54168 5.17273C2.5511 5.1633 2.56229 5.15581 2.57461 5.15071C2.58693 5.14561 2.60013 5.14299 2.61347 5.143H3.48052C3.52722 5.143 3.57264 5.12775 3.60987 5.09956C3.6471 5.07137 3.6741 5.03179 3.68677 4.98684L3.87132 4.33059C3.87526 4.31649 3.88204 4.30334 3.89126 4.29196C3.90047 4.28058 3.91192 4.27121 3.92489 4.26443L4.6607 3.88568C4.67725 3.87712 4.69114 3.86418 4.70082 3.84825C4.71051 3.83233 4.71562 3.81405 4.71561 3.79541V3.46059C4.71564 3.43982 4.72199 3.41954 4.73382 3.40247L5.12489 2.83943C5.13662 2.82252 5.15327 2.80961 5.17257 2.80247L5.7198 2.59702C5.73916 2.58977 5.75585 2.57677 5.76762 2.55978C5.7794 2.54279 5.7857 2.5226 5.7857 2.50193V2.19657C5.7857 2.17983 5.78156 2.16335 5.77367 2.14858C5.76577 2.13382 5.75435 2.12123 5.74043 2.11193L5.19186 1.74711C5.17679 1.73719 5.15937 1.73143 5.14136 1.73039C5.12334 1.72936 5.10538 1.73309 5.08927 1.74122L4.34248 2.11461C4.3254 2.12305 4.30628 2.12649 4.28733 2.12455C4.26838 2.1226 4.25036 2.11535 4.23534 2.10363L3.88123 1.82372C3.86915 1.814 3.85945 1.80165 3.85286 1.78761C3.84628 1.77357 3.84299 1.75821 3.84325 1.7427C3.84351 1.7272 3.84731 1.71196 3.85436 1.69815C3.8614 1.68433 3.87151 1.67231 3.88391 1.663L4.17159 1.45113C4.18461 1.44158 4.19516 1.42905 4.20236 1.41459C4.20955 1.40013 4.21318 1.38415 4.21295 1.36801C4.21271 1.35186 4.20861 1.336 4.201 1.32175C4.19339 1.30751 4.18248 1.2953 4.16918 1.28613L3.72106 0.973538C3.70554 0.962616 3.68727 0.956273 3.66833 0.955231C3.64939 0.954189 3.63053 0.958491 3.61391 0.967645C3.45186 1.05631 2.97641 1.31881 2.80766 1.43693C2.02688 1.98447 1.39854 2.72196 0.981949 3.57979C0.933199 3.6805 0.872931 3.78309 0.867038 3.89372C0.861145 4.00434 0.774359 4.25131 0.738199 4.35122C0.733321 4.36472 0.731371 4.37911 0.73248 4.39343C0.733588 4.40774 0.737729 4.42166 0.744627 4.43425L1.70061 6.19086C1.70921 6.20683 1.72199 6.22016 1.73757 6.22943L2.74338 6.83318C2.75643 6.84095 2.76756 6.85156 2.77595 6.86422C2.78434 6.87688 2.78978 6.89126 2.79186 6.90631L2.99329 8.3672C2.99526 8.3812 3.0001 8.39464 3.00753 8.40667C3.01495 8.4187 3.02478 8.42907 3.03641 8.43711L3.82123 8.97657C3.84397 8.9922 3.8598 9.016 3.86543 9.043L4.28168 11.0198C4.28401 11.0314 4.28846 11.0425 4.29481 11.0525C4.33391 11.1157 4.48981 11.3471 4.67784 11.3814C4.66043 11.3862 4.64489 11.3972 4.62748 11.4023C4.67265 11.4102 4.71736 11.4206 4.76141 11.4334C4.81498 11.4478 4.86856 11.4601 4.92213 11.4717C5.00597 11.4883 5.01427 11.5011 5.05445 11.4267C5.10802 11.327 5.16936 11.2927 5.21516 11.2804C5.23407 11.2761 5.25136 11.2665 5.26505 11.2527C5.27874 11.239 5.28828 11.2217 5.29257 11.2027L5.56231 9.95238C5.56798 9.92617 5.58327 9.90304 5.60516 9.88756L6.81052 9.03309C6.82453 9.02318 6.83595 9.01006 6.84383 8.99481C6.8517 8.97957 6.85581 8.96266 6.85579 8.9455V7.33943C6.85594 7.32291 6.85228 7.30658 6.84508 7.29171C6.83787 7.27684 6.82733 7.26383 6.81427 7.25372Z"
        fill="#8E8EA9"
      />
      <path
        d="M6.1607 0.428467C6.1607 0.428467 6.06293 0.434092 6.04311 0.434627C5.89793 0.438913 5.7531 0.448913 5.60864 0.464627C5.08201 0.521758 4.56625 0.653899 4.07703 0.857038C4.14212 0.902038 4.03015 0.943288 4.03015 0.943288L4.20533 1.28561H5.14283L5.78569 1.60704L6.3482 1.28561L6.1607 0.428467Z"
        fill="#8E8EA9"
      />
      <path
        d="M8.63116 2.35877L9.06268 1.98378C9.07619 1.97205 9.08655 1.95713 9.09281 1.94038C9.09908 1.92363 9.10104 1.90558 9.09854 1.88787C9.09604 1.87016 9.08914 1.85336 9.07848 1.839C9.06782 1.82464 9.05373 1.81317 9.03751 1.80565L8.53366 1.57181C8.50807 1.55987 8.47879 1.55852 8.45221 1.56805C8.42562 1.57758 8.40388 1.59723 8.3917 1.62271L8.18411 2.0569C8.17281 2.08064 8.17063 2.1077 8.17799 2.13294C8.18535 2.15818 8.20173 2.17983 8.22402 2.19378L8.5042 2.36895C8.52366 2.38106 8.5465 2.38661 8.56936 2.38478C8.59221 2.38295 8.61387 2.37383 8.63116 2.35877Z"
        fill="#8E8EA9"
      />
      <path
        d="M10.6511 2.91078L10.4949 2.66971C10.4925 2.66596 10.4903 2.66221 10.4882 2.65819C10.4601 2.6006 10.2273 2.13052 10.0329 1.94811C9.88687 1.81016 9.84535 1.8498 9.83383 1.88034C9.82725 1.89722 9.81624 1.91203 9.80196 1.92319L9.02946 2.54757C9.01043 2.56296 8.98671 2.57137 8.96223 2.57141H8.56232C8.54825 2.5714 8.53431 2.57416 8.5213 2.57953C8.50829 2.58491 8.49647 2.5928 8.48652 2.60275L8.16509 2.92417C8.15513 2.93412 8.14723 2.94594 8.14183 2.95895C8.13644 2.97195 8.13367 2.9859 8.13367 2.99998C8.13367 3.01406 8.13644 3.028 8.14183 3.04101C8.14723 3.05401 8.15513 3.06583 8.16509 3.07578L8.48652 3.39721C8.49647 3.40715 8.50829 3.41504 8.5213 3.42042C8.53431 3.4258 8.54825 3.42856 8.56232 3.42855H10.5758C10.5903 3.42856 10.6046 3.42564 10.6179 3.41998C10.6312 3.41431 10.6432 3.40601 10.6532 3.39557C10.6632 3.38514 10.671 3.37278 10.6761 3.35925C10.6812 3.34572 10.6836 3.3313 10.6829 3.31685L10.6682 2.96462C10.6674 2.94546 10.6615 2.92687 10.6511 2.91078Z"
        fill="#8E8EA9"
      />
      <path
        d="M6 1.07143C7.14026 1.07133 8.24527 1.46661 9.12676 2.18991C10.0082 2.91321 10.6117 3.91978 10.8342 5.03811C11.0567 6.15644 10.8846 7.31733 10.3472 8.32299C9.80976 9.32865 8.94024 10.1168 7.88682 10.5533C6.83339 10.9897 5.66122 11.0474 4.57004 10.7164C3.47886 10.3855 2.53618 9.68648 1.90263 8.73843C1.26908 7.79039 0.983846 6.65199 1.09554 5.51722C1.20724 4.38245 1.70894 3.32151 2.51518 2.51518C2.97171 2.05604 3.51478 1.69202 4.11296 1.4442C4.71113 1.19638 5.35252 1.06968 6 1.07143ZM6 0C2.68661 0 0 2.68661 0 6C0 9.31339 2.68661 12 6 12C9.31339 12 12 9.31339 12 6C12 2.68661 9.31339 0 6 0Z"
        fill="#8E8EA9"
      />
    </g>
    <defs>
      <clipPath id="clip0_13411_18459">
        <rect width="12" height="12" fill="white" />
      </clipPath>
    </defs>
  </svg>
);
const Eye = () => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="16"
    height="16"
    viewBox="0 0 16 16"
    fill="none"
  >
    <path
      d="M10.1339 8.00059C10.1339 9.17879 9.17879 10.1339 8.00059 10.1339C6.82239 10.1339 5.86727 9.17879 5.86727 8.00059C5.86727 6.82239 6.82239 5.86727 8.00059 5.86727C9.17879 5.86727 10.1339 6.82239 10.1339 8.00059Z"
      fill="#8E8EA9"
    />
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M12.5196 4.06907C13.8022 4.8974 14.9466 6.05606 15.8286 7.42005C15.9399 7.59262 15.9994 7.79351 16 7.99889C16.0006 8.20426 15.9422 8.4055 15.8319 8.57871C14.9532 9.95403 13.8112 11.117 12.5292 11.9427C11.1163 12.8523 9.54626 13.3333 7.98928 13.3333C6.39729 13.3333 4.8673 12.8667 3.44564 11.9457C2.18298 11.1287 1.04999 9.96836 0.169664 8.59071C0.0553699 8.41338 -0.003626 8.20607 0.000172543 7.99513C0.00397108 7.7842 0.0703926 7.57915 0.190997 7.40605C1.25932 5.87439 2.48931 4.68473 3.84697 3.87041C5.1783 3.07175 6.57195 2.66675 7.98928 2.66675C9.53393 2.66675 11.1006 3.15174 12.5196 4.06907ZM6.2228 10.6607C6.74903 11.0123 7.36771 11.2 8.00061 11.2C8.849 11.1991 9.66236 10.8616 10.2623 10.2617C10.8622 9.6618 11.1996 8.84843 11.2006 8.00004C11.2006 7.36715 11.0129 6.74847 10.6613 6.22223C10.3097 5.696 9.80991 5.28585 9.22519 5.04365C8.64047 4.80145 7.99706 4.73808 7.37632 4.86155C6.75559 4.98503 6.18541 5.28979 5.73788 5.73732C5.29036 6.18484 4.98559 6.75502 4.86212 7.37576C4.73865 7.99649 4.80202 8.6399 5.04422 9.22462C5.28641 9.80934 5.69656 10.3091 6.2228 10.6607Z"
      fill="#8E8EA9"
    />
  </svg>
);
export const Complex: Story<InputProps> = args => (
  <FormControl>
    <Box sx={{ display: 'flex', alignItems: 'flex-start' }}>
      <FormLabel>
        Label&nbsp;
        <Globe />
      </FormLabel>
      <Link
        level="smallText"
        component="button"
        underline="none"
        sx={{ ml: 'auto' }}
      >
        Details
      </Link>
    </Box>
    <Input
      {...args}
      placeholder="Placeholder"
      endDecorator={
        <IconButton variant="plain">
          <Eye />
        </IconButton>
      }
    />
    <FormHelperText>Description</FormHelperText>
  </FormControl>
);

export const Prefix: Story<InputProps> = args => (
  <FormControl>
    <FormLabel>Label</FormLabel>
    <Input
      {...args}
      placeholder="Placeholder"
      startDecorator="Test"
      defaultValue="Completed"
      sx={{
        [`& .${inputClasses.startDecorator}`]: {
          bgcolor: 'neutral.100',
          alignSelf: 'stretch',
          px: 2,
          ml: 'calc(-1 * var(--Input-paddingInline))',
          borderTopLeftRadius: 'var(--Input-radius)',
          borderBottomLeftRadius: 'var(--Input-radius)',
        },
      }}
    />
    <FormHelperText>Description</FormHelperText>
  </FormControl>
);

const EyeStriked = () => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="16"
    height="16"
    viewBox="0 0 16 16"
    fill="none"
  >
    <path
      d="M2.69876 4.5834L1.40187 3.28651C1.14066 3.0253 1.13815 2.60431 1.40031 2.34214C1.66066 2.0818 2.08445 2.08348 2.34468 2.3437L13.6553 13.6543C13.9165 13.9155 13.919 14.3365 13.6568 14.5987C13.3965 14.859 12.9727 14.8573 12.7125 14.5971L10.9218 12.8065C10.0237 13.1476 9.04983 13.3323 7.99998 13.3323C5.61829 13.3323 3.62751 12.3818 2.02563 10.8104C1.46982 10.2652 1.00087 9.68219 0.614807 9.09818C0.380356 8.74353 0.223242 8.4623 0.140498 8.2906C0.0628908 8.12955 0.0636596 7.86685 0.140498 7.7074C0.223242 7.5357 0.380356 7.25447 0.614807 6.89981C1.00087 6.31581 1.46982 5.73283 2.02563 5.18759C2.24285 4.9745 2.46723 4.77283 2.69876 4.5834L2.69876 4.5834ZM9.72453 11.6092L8.6907 10.5753C8.4704 10.6343 8.23886 10.6657 7.99998 10.6657C6.52722 10.6657 5.33331 9.47176 5.33331 7.999C5.33331 7.76012 5.36472 7.52858 5.42364 7.30828L4.38981 6.27445C4.13991 6.79663 3.99998 7.38147 3.99998 7.999C3.99998 10.2081 5.79084 11.999 7.99998 11.999C8.61751 11.999 9.20235 11.8591 9.72453 11.6092ZM5.07811 3.19151C5.97622 2.85036 6.95012 2.66567 7.99998 2.66567C10.3817 2.66567 12.3724 3.61619 13.9743 5.18759C14.5301 5.73283 14.9991 6.31581 15.3851 6.89981C15.6196 7.25447 15.7767 7.5357 15.8595 7.7074C15.9371 7.86845 15.9363 8.13115 15.8595 8.2906C15.7767 8.4623 15.6196 8.74353 15.3851 9.09818C14.9991 9.68219 14.5301 10.2652 13.9743 10.8104C13.7571 11.0235 13.5327 11.2252 13.3012 11.4146L11.6101 9.72355C11.86 9.20137 12 8.61653 12 7.999C12 5.78986 10.2091 3.999 7.99998 3.999C7.38245 3.999 6.7976 4.13894 6.27542 4.38883L5.07811 3.19151ZM7.30925 5.42266C7.52956 5.36374 7.7611 5.33233 7.99998 5.33233C9.47274 5.33233 10.6666 6.52624 10.6666 7.999C10.6666 8.23788 10.6352 8.46942 10.5763 8.68972L7.30925 5.42266Z"
      fill="#666687"
    />
  </svg>
);

export const Permission: Story<InputProps> = args => (
  <FormControl disabled>
    <FormLabel>Label</FormLabel>
    <Input
      {...args}
      placeholder="No permissions to see this field"
      startDecorator={<EyeStriked />}
    />
  </FormControl>
);
